window.__require=function t(o,e,i){function r(c,s){if(!e[c]){if(!o[c]){var h=c.split("/");if(h=h[h.length-1],!o[h]){var d="function"==typeof __require&&__require;if(!s&&d)return d(h,!0);if(n)return n(h,!0);throw new Error("Cannot find module '"+c+"'")}}var a=e[c]={exports:{}};o[c][0].call(a.exports,function(t){return r(o[c][1][t]||t)},a,a.exports,t,o,e,i)}return e[c].exports}for(var n="function"==typeof __require&&__require,c=0;c<i.length;c++)r(i[c]);return r}({Chart:[function(t,o,e){"use strict";cc._RF.push(o,"b6119lwZ29EIKgiT3thReHB","Chart"),Object.defineProperty(e,"__esModule",{value:!0});var i=cc._decorator,r=i.ccclass,n=i.property;function c(t,o){return Math.round(Math.random()*(o-t))+t}var s=function(t){function o(){var o=null!==t&&t.apply(this,arguments)||this;return o.rect=null,o.rowCount=0,o.columnCount=0,o._points=null,o.trendsPoint=[],o.trendsValues=[],o.currentIndex=-1,o._graphics=null,o.trendsGraphicsNode=null,o.pointsGraphicsNode=null,o.highlightGraphicsNode=null,o.tipsNode=null,o}return __extends(o,t),o.prototype.onLoad=function(){function t(t,o){var e=new cc.Node(t);return e.addComponent(cc.Graphics),o.addChild(e),e}this.node.setContentSize(this.rect),this.trendsGraphicsNode=t("trendsGraphicsNode",this.node),this.pointsGraphicsNode=t("highlightGraphicsNode",this.node),this.highlightGraphicsNode=t("pointsGraphicsNode",this.node),this.highlightGraphicsNode.getComponent(cc.Graphics).fillColor=cc.color(200,200,0,100),this.tipsNode=new cc.Node("tipsNode");var o=this.tipsNode.addComponent(cc.Label);o.fontSize=20,o.string="0",this.node.addChild(this.tipsNode),this.tipsNode.active=!1,this.drawBasicTable(),this.addTableTitle(),this.addEvent();for(var e=[],i=0;i<this.columnCount;i++)e[i]=c(1,10);this.drawTrends(e)},o.prototype.addEvent=function(){var t=this,o=this.rect.width/(this.columnCount-1)/2,e=this.rect.height/2;cc.log("addEvent",this.node.y-e,this.node.y+e);var i=function(i){i.stopPropagation();var r=t.node.convertToNodeSpaceAR(i.getLocation());if(i.type==cc.Node.EventType.MOUSE_LEAVE||r.y<t.node.y-e&&r.y>t.node.y+e)return cc.log("hideTips"),t.hideTips();for(var n=0;n<t.trendsPoint.length;n++){var c=t.trendsPoint[n];if(r.x<c.x+o&&r.x>c.x-o)return cc.log("showtips"),t.showTips(n,c)}};this.node.on(cc.Node.EventType.TOUCH_START,i),this.node.on(cc.Node.EventType.TOUCH_MOVE,i),this.node.on(cc.Node.EventType.MOUSE_ENTER,i),this.node.on(cc.Node.EventType.MOUSE_LEAVE,i),this.node.on(cc.Node.EventType.MOUSE_MOVE,i);var r=new cc.Node;this.node.addChild(r),r.setContentSize(cc.winSize),r.on(cc.Node.EventType.TOUCH_START,function(o){var e=t.node.convertToNodeSpaceAR(o.getLocation());t.rect.contains(e)||(t.hideTips(),o.stopPropagation())})},o.prototype.drawBasicTable=function(){for(var t=this._points=[],o=this.rect.x,e=this.rect.y,i=this.rect.width/(this.columnCount-1),r=this.rect.height/(this.rowCount-1),n=cc.v2,c=0;c<this.columnCount;c++){t[c]=[];for(var s=0;s<this.rowCount;s++)t[c][s]=n(o,e),e+=r;o+=i,e=this.rect.y}var h=this._graphics=this.addComponent(cc.Graphics);this._graphics.lineWidth=1,this._graphics.strokeColor=cc.color(0,200,55,120),this._graphics.fillColor=cc.color(0,200,55,120),this._graphics.moveTo(this.rect.x,this.rect.y);o=this.rect.x,e=this.rect.y;var d=this.rect,a=d.height/(this.rowCount-1);for(c=0;c<this.rowCount;c++)h.lineTo(d.width+o,e),e+=a,h.moveTo(o,e);this._graphics.stroke()},o.prototype.addTableTitle=function(){var t=["10","9","8","7","6","5","4","3","2","1"],o=["15","16","17","18","19","20","21","22","23","24","25","26","27","28","29"];if(t.length<this.rowCount)return cc.error("\u884c\u6807\u9898\u957f\u5ea6\u4e0d\u5bf9");if(o.length<this.columnCount)return cc.error("\u5217\u6807\u9898\u957f\u5ea6\u4e0d\u5bf9");for(var e=cc.v2(-15,-12),i=0;i<this.rowCount;i++){(r=new cc.Node).parent=this.node,r.position=this._points[0][i].add(e),r.color=cc.color(0,200,55,120),(n=r.addComponent(cc.Label)).fontSize=20,n.string=t[i]}e=cc.v2(10,-30);for(i=0;i<this.columnCount;i++){var r,n;(r=new cc.Node).parent=this.node,r.position=this._points[i][0].add(e),r.color=cc.color(0,200,55,120),(n=r.addComponent(cc.Label)).fontSize=20,n.string=o[i]}},o.prototype.drawTrends=function(t){var o=this.trendsGraphicsNode.getComponent(cc.Graphics);o.strokeColor=cc.Color.RED;var e=this.pointsGraphicsNode.getComponent(cc.Graphics);e.fillColor=cc.Color.RED;var i=this._points;cc.log(i);for(var r=0;r<t.length;r++){var n=t[r],c=i[r][n-1];this.trendsPoint[r]=c,this.trendsValues[r]=String(10-n+1),e.circle(c.x,c.y,5),0!=r&&o.lineTo(c.x,c.y),o.moveTo(c.x,c.y)}o.stroke(),e.fill()},o.prototype.showTips=function(t,o){if(this.currentIndex!=t){var e=cc.v2();o.add(cc.v2(0,5),e),this.tipsNode.active=!0,this.tipsNode.position=e,this.tipsNode.getComponent(cc.Label).string=this.trendsValues[t],this.currentIndex=t;var i=this.highlightGraphicsNode.getComponent(cc.Graphics);i.clear(),i.circle(o.x,o.y,8),i.fill()}},o.prototype.hideTips=function(){-1!=this.currentIndex&&(this.currentIndex=-1,this.tipsNode.active=!1,this.highlightGraphicsNode.getComponent(cc.Graphics).clear())},__decorate([n(cc.Rect)],o.prototype,"rect",void 0),__decorate([n(Number)],o.prototype,"rowCount",void 0),__decorate([n(Number)],o.prototype,"columnCount",void 0),o=__decorate([r],o)}(cc.Component);e.default=s,cc._RF.pop()},{}]},{},["Chart"]);